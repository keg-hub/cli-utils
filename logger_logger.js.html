<!DOCTYPE html>
<html lang="en">
<head>
    
    <meta charset="utf-8">
    <title>logger/logger.js - CLI Utils</title>
    
    <meta name="description" content="Utility methods for building Node.js CLI's" />
    
        <meta name="keywords" content="utils, cli, task, tasks" />
        <meta name="keyword" content="utils, cli, task, tasks" />
    
    
    
    <meta property="og:title" content="CLIJS Utils"/>
    <meta property="og:type" content="website"/>
    <meta property="og:image" content=""/>
    <meta property="og:site_name" content="cli-utils"/>
    <meta property="og:url" content="https://github.com/keg-hub/keg-cli/tree/develop/repos/cli-utils"/>
    
    <script src="scripts/prettify/prettify.js"></script>
    <script src="scripts/prettify/lang-css.js"></script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc.css">
    <script src="scripts/nav.js" defer></script>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
</head>
<body>

<input type="checkbox" id="nav-trigger" class="nav-trigger" />
<label for="nav-trigger" class="navicon-button x">
  <div class="navicon"></div>
</label>

<label for="nav-trigger" class="overlay"></label>

<nav >
    
    <input type="text" id="nav-search" placeholder="Search" />
    
    <h2><a href="index.html">Home</a></h2><h2><a href="https://github.com/keg-hub/keg-cli/tree/develop/repos/cli-utils" target="_blank" class="menu-item" id="repository" >Github repo</a></h2><h3>Tutorials</h3><ul><li><a href="tutorial-Tasks.html">Tasks</a></li></ul><h3>Modules</h3><ul><li><a href="module-CLI.html">CLI</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-CLI.html#~runTask">runTask</a></li><li data-type='method' style='display: none;'><a href="module-CLI.html#~setAppRoot">setAppRoot</a></li><li data-type='method' style='display: none;'><a href="module-CLI.html#~showHelp">showHelp</a></li></ul></li><li></li><li></li><li><a href="module-Commands.html">Commands</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Commands.html#.docker">docker</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#.dockerCompose">dockerCompose</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#.node">node</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#.npm">npm</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#.npx">npx</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#.yarn">yarn</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#~containerExec">containerExec</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#~dockerCmd">dockerCmd</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#~dockerExec">dockerExec</a></li><li data-type='method' style='display: none;'><a href="module-Commands.html#~inDocker">inDocker</a></li></ul></li><li></li><li><a href="module-Constants.html">Constants</a></li><li><a href="module-Error.html">Error</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Error.html#~throwErr">throwErr</a></li><li data-type='method' style='display: none;'><a href="module-Error.html#~throwExitError">throwExitError</a></li><li data-type='method' style='display: none;'><a href="module-Error.html#~throwNoTask">throwNoTask</a></li></ul></li><li></li><li><a href="module-FS.html">FS</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-FS.html#~buildFoundArray">buildFoundArray</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~copyFile">copyFile</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~copyFileSync">copyFileSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~copyStream">copyStream</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~copySync">copySync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~emptyDirSync">emptyDirSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~ensureDirSync">ensureDirSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFiles">getFiles</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFilesSync">getFilesSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFolderContent">getFolderContent</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFolderContentSync">getFolderContentSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFolders">getFolders</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getFoldersSync">getFoldersSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~getPackageRoot">getPackageRoot</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~limboify">limboify</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~mkDir">mkDir</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~movePath">movePath</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~pathExists">pathExists</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~pathExistsSync">pathExistsSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~readDir">readDir</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~readFile">readFile</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~readFileSync">readFileSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~removeFile">removeFile</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~removeFileSync">removeFileSync</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~requireFile">requireFile</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~stat">stat</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~writeFile">writeFile</a></li><li data-type='method' style='display: none;'><a href="module-FS.html#~writeFileSync">writeFileSync</a></li></ul></li><li></li><li><a href="module-Global-Config.html">Global-Config</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~addGlobalOptions">addGlobalOptions</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getDefaultEnv">getDefaultEnv</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getEditorCmd">getEditorCmd</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getGlobalOptions">getGlobalOptions</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getKegGlobalConfig">getKegGlobalConfig</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getKegSetting">getKegSetting</a></li><li data-type='method' style='display: none;'><a href="module-Global-Config.html#~getPathFromConfig">getPathFromConfig</a></li></ul></li><li></li><li></li><li><a href="module-Helpers.html">Helpers</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Helpers.html#~addFlag">addFlag</a></li><li data-type='method' style='display: none;'><a href="module-Helpers.html#~addParam">addParam</a></li><li data-type='method' style='display: none;'><a href="module-Helpers.html#~addToProcess">addToProcess</a></li><li data-type='method' style='display: none;'><a href="module-Helpers.html#~addValues">addValues</a></li></ul></li><li><a href="module-Network.html">Network</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Network.html#~getAddresses">getAddresses</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~getHostIP">getHostIP</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~getPrivateIPs">getPrivateIPs</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~getPublicIP">getPublicIP</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~getPublicIPsForUrl">getPublicIPsForUrl</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~ipIsInRange">ipIsInRange</a></li><li data-type='method' style='display: none;'><a href="module-Network.html#~isPrivateIP">isPrivateIP</a></li></ul></li><li></li><li></li><li></li><li></li><li></li><li></li><li><a href="module-Process.html">Process</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Process.html#~addToProcess">addToProcess</a></li><li data-type='method' style='display: none;'><a href="module-Process.html#~getEventExitCode">getEventExitCode</a></li><li data-type='method' style='display: none;'><a href="module-Process.html#~onProcessExit">onProcessExit</a></li></ul></li><li></li><li><a href="module-Tap.html">Tap</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Tap.html#~getTapConfig">getTapConfig</a></li><li data-type='method' style='display: none;'><a href="module-Tap.html#~getTapPackage">getTapPackage</a></li><li data-type='method' style='display: none;'><a href="module-Tap.html#~getTapPath">getTapPath</a></li><li data-type='method' style='display: none;'><a href="module-Tap.html#~getTapRoot">getTapRoot</a></li></ul></li><li></li><li></li><li><a href="module-Task.html">Task</a><ul class='methods'><li data-type='method' style='display: none;'><a href="module-Task.html#~buildTaskData">buildTaskData</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~executeTask">executeTask</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~findTask">findTask</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~getTaskDefinitions">getTaskDefinitions</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~hasHelpArg">hasHelpArg</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~parseTaskArgs">parseTaskArgs</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~registerTasks">registerTasks</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~runInternalTask">runInternalTask</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~setSharedOptions">setSharedOptions</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~setTaskFolder">setTaskFolder</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~sharedOptions">sharedOptions</a></li><li data-type='method' style='display: none;'><a href="module-Task.html#~validateTask">validateTask</a></li></ul></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li><li></li></ul><h3>Classes</h3><ul><li><a href="Log.html">Log</a><ul class='methods'><li data-type='method' style='display: none;'><a href="Log.html#clear">clear</a></li><li data-type='method' style='display: none;'><a href="Log.html#color">color</a></li><li data-type='method' style='display: none;'><a href="Log.html#empty">empty</a></li><li data-type='method' style='display: none;'><a href="Log.html#header">header</a></li><li data-type='method' style='display: none;'><a href="Log.html#highlight">highlight</a></li><li data-type='method' style='display: none;'><a href="Log.html#label">label</a></li><li data-type='method' style='display: none;'><a href="Log.html#pair">pair</a></li><li data-type='method' style='display: none;'><a href="Log.html#print">print</a></li><li data-type='method' style='display: none;'><a href="Log.html#removeTag">removeTag</a></li><li data-type='method' style='display: none;'><a href="Log.html#setColors">setColors</a></li><li data-type='method' style='display: none;'><a href="Log.html#setTag">setTag</a></li><li data-type='method' style='display: none;'><a href="Log.html#spacedMsg">spacedMsg</a></li><li data-type='method' style='display: none;'><a href="Log.html#spaceMsg">spaceMsg</a></li><li data-type='method' style='display: none;'><a href="Log.html#stderr">stderr</a></li><li data-type='method' style='display: none;'><a href="Log.html#stdout">stdout</a></li><li data-type='method' style='display: none;'><a href="Log.html#subHeader">subHeader</a></li><li data-type='method' style='display: none;'><a href="Log.html#table">table</a></li><li data-type='method' style='display: none;'><a href="Log.html#toggleTag">toggleTag</a></li></ul></li></ul>
</nav>

<div id="main">
    
    <h1 class="page-title">logger/logger.js</h1>
    

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>const { get, isColl, isObj, isFunc } = require('@keg-hub/jsutils')
const { colors } = require('./colors')


/**
 * State of the log tag
 * Disables logging the tag, even when it's set
 * @private
 * @type {Boolean}
 */
let TAG_DISABLED = false

/**
 * General logging method for all log types
 * @function
 * @private
 * @param {Object} logger - Log class instance
 * @param {string} type - Type of log ( key of Log.colorMap )
 *
 * @returns {Void}
 */
const logData = (logger, type) => {
  return (...args) => {
    // Get the log color from the type, or use the default
    const logColor = logger.colorMap[type] || logger.colorMap[logger.default]

    // If the type is a log type use it, otherwise use the default
    const logMethod = (console[type] &amp;&amp; type) || logger.default

    // Loop the passed in data to log, and apply the log color
    const toLog = args.map(data => {
      return isColl(data)
        ? colors[logColor](JSON.stringify(data, null, 2))
        : isFunc(data.toString)
          ? colors[logColor](data.toString())
          : colors[logColor](data)
    })

    if(!TAG_DISABLED &amp;&amp; logger.tag){
      logMethod === 'dir' || logMethod === 'table'
        ? logger.stdout(`${logger.tag} `)
        : toLog.unshift(logger.tag)
    }

    console[logMethod](...toLog)
  }
}

/**
 * Class with helper methods to log data to the terminal or console
 * @Class
 * @param {Object} props - Options for configuring the Log Class instance
 * @returns {Object} - Instance of the Log Class
 */
class Log {

  tag = false

  constructor(props) {
    this.colorMap = {
      data: 'white',
      dir: 'white',
      error: 'red',
      fail: 'red',
      info: 'cyan',
      log: 'white',
      success: 'green',
      text: 'white',
      warn: 'yellow',
      green: 'green',
      red: 'red',
      yellow: 'yellow',
      cyan: 'cyan',
      magenta: 'magenta',
      blue: 'blue',
      gray: 'gray',
    }

    this.default = get(props, 'default', 'log')

    // Loop the colorMap and build the log method for it
    Object.keys(this.colorMap).map(key => (this[key] = logData(this, key)))

    // Add the colors module for easy access
    this.colors = colors

    this.log = this.print
  }

  /**
   * Set a tag value for all logged messages
   * @instance
   * @memberof Log
   * @function
   * @param {string} tag - Text that should be used as the tag
   * @param {string} color - Color of tag when logged
   */
  setTag = (tag, color) => {
    if(!tag) return this.warn(`Tag must be of type string`, tag)

    this.tag = color
      ? colors[this.colorMap[color] || color](tag)
      : tag
  }

  /**
   * Removes the defined tag from the Log instance
   * @instance
   * @memberof Log
   * @function
   *
   */
  removeTag = () => {
    this.tag = undefined
  }

  /**
   * Toggle the Log instance tag on or off
   * @instance
   * @memberof Log
   * @function
   *
   */
  toggleTag = () => {
    if(!TAG_DISABLED) TAG_DISABLED = true
    else TAG_DISABLED = false
  }

  /**
   * Helper to create a string in the passed in color
   * @instance
   * @memberof Log
   * @function
   * @param {string} colorName - name of the color to use
   * @param {string} data - data to set color for
   *
   * @returns {void}
   */
  color = (colorName, data) =>
    colors[this.colorMap[colorName] || colorName](data)

  /**
   * Helper to print the passed in data
   * &lt;br/>Similar to calling `console.log(...data)`
   * @instance
   * @memberof Log
   * @function
   *
   * @returns {void}
   */
  print = (...data) => {
    !TAG_DISABLED &amp;&amp;
      this.tag &amp;&amp;
      data.unshift(this.tag)
    console.log(...data)
  }

  /**
   * Helper to change the default colors
   * @instance
   * @memberof Log
   * @function
   *
   * @returns {void}
   */
  setColors = colorMap =>
    isObj(colorMap) &amp;&amp; (this.colorMap = { ...this.colorMap, ...colorMap })

  /**
   * Helper to log an empty line
   * @instance
   * @memberof Log
   * @function
   *
   * @returns {void}
   */
  empty = () => console.log('')

  /**
   * Helper to print out a table.
   * @instance
   * @memberof Log
   * @function
   * @see docs about params here: https://developer.mozilla.org/en-US/docs/Web/API/Console/table
   * @returns {void}
   */
  table = (...args) => {
    !TAG_DISABLED &amp;&amp;
      this.tag &amp;&amp;
      args.unshift(this.tag)

    console.table(...args)
  }

  /**
   * Helper to log out a CLI message header
   * @instance
   * @memberof Log
   * @function
   *
   * @param {string} title - Text to print as the header
   * @param {string} color - Color of the header text
   *
   * @returns {void}
   */
  header = (title, color) => {
    const tagState = TAG_DISABLED
    TAG_DISABLED = true

    const middle = `              ${title}              `

    const line = middle.split('').reduce((line, item, index) => (line += ' '))

    color = color || 'green'

    this.empty(``)
    this.print(colors.underline[color](line))
    this.print(line)
    this.print(colors[color](middle))
    this.print(colors.underline[color](line))
    this.empty(``)

    TAG_DISABLED = tagState
  }

  /**
   * Helper to log out a CLI message sub-header
   * @instance
   * @memberof Log
   * @function
   *
   * @param {string} title - Text to print as the sub-header
   * @param {string} color - Color of the header text
   *
   * @returns {void}
   */
  subHeader = (title, color) => {
    const tagState = TAG_DISABLED
    TAG_DISABLED = true
    
    const middle = `          ${title}       `

    const line = middle.split('').reduce((line, item, index) => (line += ' '))

    color = color || 'white'

    this.empty(``)
    this.print(colors[color](middle))
    this.print(`  ${colors.underline[color](line)}`)
    this.empty(``)

    TAG_DISABLED = tagState
  }

  /**
   * Helper to log a title and message in separate colors
   * @instance
   * @memberof Log
   * @function
   * @param {string} title - Prints the string in the color `cyan`
   * @param {string} message - Prints the string in the color `white`
   *
   * @returns {void}
   */
  pair = (title, message) => {
    const toLog = []
    // Check that the title and message exist, then add to the toLog array
    title &amp;&amp; toLog.push(Logger.colors.brightCyan(title))
    message &amp;&amp; toLog.push(Logger.colors.brightWhite(message))

    toLog.length &amp;&amp; this.print(...toLog)
  }

  /**
   * Alias for `Log.pair`
   * @instance
   * @memberof Log
   * @function
   */
  label = (...args) => this.pair(...args)

  /**
   * Helper to log a spaced title and message in separate colors
   * @instance
   * @memberof Log
   * @function
   * @param {string} title - Prints the string in cyan
   * @param {string} message - Prints the string in white
   *
   * @returns {void}
   */
  spacedMsg = (title, message) => {
    this.empty()
    this.pair(title, message)
    this.empty()
  }

  /**
   * Alias for `Log.spacedMsg`
   * @instance
   * @memberof Log
   * @function
   */
  spaceMsg = (...args) => this.spacedMsg(...args)

  /**
   * Writes passed in arguments to the process stdout
   * @instance
   * @memberof Log
   * @function
   * @param {*} - Items to write to process stdout
   */
  stdout = (...args) => process.stdout.write(...args)

  /**
   * Writes to the process stderr
   * @instance
   * @memberof Log
   * @function
   * @param {*} - Items to write to process stderr
   */
  stderr = (...args) => process.stderr.write(...args)

  /**
   * Clears the terminal, does not allow scrolling back
   * @instance
   * @memberof Log
   * @function
   */
  clear = () => {
    process.stdout.write('\u001b[3J\u001b[2J\u001b[1J')
    console.clear()
  }

  /**
   * Helper to highlight a word in a logged message
   * @instance
   * @memberof Log
   * @function
   * @param {string} start - Beginning of the message
   * @param {string} highlight - Part of message to be highlighted
   * @param {string} end - End of the message
   *
   * @returns {void}
   */
  highlight = (start = '', highlight = '', end = '') => {
    this.log(`${start}`, Logger.colors.cyan(highlight), end)
  }
}

/**
 * Create a Log instance, so we have a singleton through out the application
 * @private
 */
const Logger = new Log()

module.exports = {
  Log,
  Logger,
}
</code></pre>
        </article>
    </section>




    
    
</div>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.6.10</a> on Wed Mar 29 2023 10:03:12 GMT-0700 (Mountain Standard Time) using the <a href="https://github.com/clenemt/docdash">docdash</a> theme.
</footer>

<script>prettyPrint();</script>
<script src="scripts/polyfill.js"></script>
<script src="scripts/linenumber.js"></script>

<script src="scripts/search.js" defer></script>


<script src="scripts/collapse.js" defer></script>


    <link type="text/css" rel="stylesheet" href="styles/docs.css">
    
    <script src="scripts/docs.js"></script>
    
</body>
</html>
